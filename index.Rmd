---
title: "Making Graphs in R Using ggplot2: Part 2"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
    df_print: default
runtime: shiny_prerendered
description: >
  Learn about the basic syntax of R.
---

```{r setup, include=FALSE}
library(learnr)
library(ggplot2)
library(dplyr)
library(knitr)
tutorial_options(exercise.timelimit = 10)

BeanSurvey<-read.csv("bean_survey.csv")[,-1]

BeanSurvey$AGEHH<-c(32,57,20,55,78,42,28,49,41,54,65,63,32,29,43,68,53,39,25,44,23,47,32,26,25,29,44,23,58,69,26,65,75,51,38,24,35,29,37,45,50,23,60,32,70,43,51,28,65,33)

BeanSurvey<-mutate(BeanSurvey,GENDERHH=ifelse(is.na(GENDERHH),"male",as.character(GENDERHH)))


```


## Colours  

![](https://youtu.be/-ibuoSs6AoA)

Lets start by adding colours to the scatter plot we were just making. We have two different ways we can apply colours to a scatterplot - either:  
a) make all of the points the same colour. 
b) Or we can set the points to be different colours based on a column in the data.  
Option a) involves changing the colour through the geometry; option b) will require us to change colours through adding an aesthetic.

Let's look at option a) first, and make all of our points red:

```{r colour1,exercise=TRUE}
ggplot(data = BeanSurvey,  aes(x = AGEHH,y=LANDAREA)) + 
  geom_point(colour="red")
```

If we are just adding colours superficially to make our plot look nicer, this is one way to achieve it. We could use the  <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" target="_blank">the R colour chart</a> to pick out a nice shade to help our points look good.

But we can add to the information being displayed by setting the colour of points to vary by a third column - for example gender of the household head. 

```{r colour2,exercise=TRUE}
ggplot(data = BeanSurvey,  aes(x = AGEHH,y=LANDAREA,colour=GENDERHH)) + 
  geom_point()
```

In this case we can see colours being automatically assigned to each of the unique values of the column we have mapping to the `colour` aesthetic. This will help us to now visualise the relationship between three variables from our data on the same plot.

However there are lots of ways to get this wrong, and in particular through mixing up these two different ways of assigning the colours. In the video above I illustrate this example of what happens if you specify a colour name in the aesthetic or specify a variable in the geometry.
You can run examples of this below - make sure you don't fall into these traps!

```{r bluered1,exercise=TRUE}

ggplot(data = BeanSurvey,  aes(x = AGEHH,y=LANDAREA,colour="blue")) + 
  geom_point()
```


```{r bluered2,exercise=TRUE,error=TRUE}

ggplot(data = BeanSurvey,  aes(x = AGEHH,y=LANDAREA)) + 
  geom_point(colour=GENDERHH)
```

Remember that both of those examples are wrong, but only one of them gives an error!

## Fill

When dealing with bar charts or boxplots in particular, although some other geometries as well, there are actually two different colour assignments that you need to be aware of. The colour aesthetic still works, as does setting the colour within the geometry.

```{r fill1, exercise=TRUE}
ggplot(data = BeanSurvey,  aes(y = AGEHH,x=GENDERHH,colour=GENDERHH)) + 
  geom_boxplot()
```

```{r fill2, exercise=TRUE}
ggplot(data =BeanSurvey,  aes(y = AGEHH,x=GENDERHH,colour=GENDERHH)) + 
  geom_boxplot(colour="blue")
```

But you will notice that this affects the points and lines of the box, but not the internal colour. So to change that attribute we would use `fill` instead of `colour`.

```{r fill3, exercise=TRUE}
ggplot(data = BeanSurvey,  aes(y = AGEHH,x=GENDERHH,fill=GENDERHH)) + 
  geom_boxplot()
```

Similarly we could set a single colour for all boxes by using setting the `fill` colour within the `geom_boxplot` line of code.



*QUESTION: In the chunk below write the R code to produce a histogram of land area from the BeanSurvey dataset, and have it shaded in green. Then investigate what happens within geom_histogram if you map a categorical variable, like Gender of household head, to either the colour or fill aesthetic*

```{r shadehist,exercise=TRUE}

```

```{r shadehist-solution}
ggplot(data=BeanSurvey,aes(x=LANDAREA))+
  geom_histogram(fill="green")

#second plot - setting fill = GENDERHH gives us overlapping histograms with different colours. Can be useful for comparing distributions, but a little confusing, because the genders are stacked on top of each other so comparing is not easy. We will learn how to separate this out a little bit later in the course.
ggplot(data=BeanSurvey,aes(x=LANDAREA,fill=GENDERHH))+
  geom_histogram()
```
